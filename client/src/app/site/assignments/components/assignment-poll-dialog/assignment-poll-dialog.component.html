<os-poll-form [data]="pollData" [pollMethods]="assignmentPollMethods" #pollForm></os-poll-form>
<ng-container *ngIf="pollForm.contentForm.get('type').value === 'analog'">
    <!-- Candidate values -->
    <form [formGroup]="dialogVoteForm">
        <div *ngFor="let option of options" [ngClass]="getGridClass()">
            <div>
                <span *ngIf="option.user">{{ option.user.getFullName() }}</span>
                <span *ngIf="!option.user">No user {{ option.candidate_id }}</span>
            </div>
            
            <div *ngFor="let value of analogPollValues" [formGroupName]="option.id" class="votes">
                <mat-form-field>
                    <input type="number" matInput min="0" [formControlName]="value">
                    <mat-label>{{ voteValueVerbose[value] | translate }}</mat-label>
                </mat-form-field>
            </div>
        </div>
    </form>
    <mat-divider></mat-divider>
    <div class="spacer-top-20">
        <mat-checkbox
            [(ngModel)]="publishImmediately"
            (change)="publishStateChanged($event.checked)"
        >
            <span translate>Publish immediately</span>
        </mat-checkbox>
        <mat-error *ngIf="!dialogVoteForm.valid" translate>
            If you want to publish after creating, you have to fill at least one of the fields.
        </mat-error>
    </div>
    <!-- Summary values -->
    <!-- <div *ngFor="let sumValue of sumValues" class="sum-value">
        <mat-form-field>
            <input
                type="number"
                matInput
                [value]="getSumValue(sumValue)"
                (change)="setSumValue(sumValue, $event.target.value)"
            />
            <mat-label>{{ pollService.getLabel(sumValue) | translate }}</mat-label>
        </mat-form-field>
    </div> -->
</ng-container>
<mat-divider></mat-divider>
<div mat-dialog-actions>
    <button mat-button (click)="submitPoll()" [disabled]="!pollForm.contentForm || pollForm.contentForm.invalid || dialogVoteForm.invalid">
        <span translate>Save</span>
    </button>
    <button mat-button [mat-dialog-close]="false">
        <span translate>Cancel</span>
    </button>
</div>
